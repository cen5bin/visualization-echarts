/**
 * Created by wubincen on 15/5/22.
 */

//用户加入数量  按年月
var user_join = [['2011-07', 6718], ['2011-08', 6144], ['2011-03', 6121], ['2013-08', 6120], ['2011-06', 6059],
    ['2013-07', 6046], ['2011-05', 5958], ['2012-07', 5866], ['2011-04', 5762], ['2012-10', 5757], ['2013-06', 5756],
    ['2011-02', 5755], ['2010-07', 5729], ['2011-01', 5722], ['2013-05', 5703], ['2012-08', 5524], ['2013-03', 5495],
    ['2012-06', 5493], ['2012-03', 5485], ['2013-01', 5480], ['2012-09', 5472], ['2012-01', 5467], ['2011-10', 5466],
    ['2014-07', 5446], ['2010-08', 5400], ['2014-03', 5363], ['2011-11', 5284], ['2011-09', 5268], ['2014-05', 5251],
    ['2014-01', 5174], ['2013-04', 5138], ['2014-06', 5127], ['2013-09', 5086], ['2012-05', 5066], ['2014-04', 5019],
    ['2012-04', 5014], ['2012-12', 4965], ['2013-02', 4963], ['2011-12', 4953], ['2012-02', 4915], ['2012-11', 4873],
    ['2013-10', 4855], ['2010-12', 4563], ['2010-09', 4552], ['2014-02', 4531], ['2010-06', 4523], ['2014-08', 4485],
    ['2013-12', 4444], ['2013-11', 4397], ['2010-10', 4064], ['2010-11', 4060], ['2010-03', 3793], ['2010-01', 3662],
    ['2010-04', 3475], ['2010-05', 3470], ['2009-08', 3448], ['2010-02', 3431], ['2014-09', 3250], ['2009-07', 3127],
    ['2009-09', 2993], ['2014-10', 2950], ['2009-06', 2910], ['2009-04', 2817], ['2009-05', 2747], ['2009-10', 2652],
    ['2009-12', 2597], ['2009-01', 2511], ['2009-03', 2467], ['2009-02', 2351], ['2009-11', 2348], ['2014-11', 2176],
    ['2008-07', 1965], ['2008-08', 1896], ['2008-11', 1836], ['2008-12', 1802], ['2008-09', 1798], ['2014-12', 1733],
    ['2008-10', 1665], ['2008-06', 1642], ['2008-05', 1431], ['2008-03', 1393], ['2008-04', 1380], ['2008-01', 1303],
    ['2008-02', 1279], ['2007-08', 1103], ['2007-07', 1093], ['2007-12', 972], ['2007-11', 951],
    ['2007-06', 938], ['2007-09', 898], ['2007-10', 893], ['2007-05', 892], ['2007-04', 791], ['2007-01', 743],
    ['2007-03', 720], ['2007-02', 682], ['2006-08', 542], ['2006-12', 509], ['2006-10', 455], ['2006-09', 445],
    ['2006-11', 386], ['2006-07', 303], ['2006-06', 263], ['2006-03', 238], ['2006-04', 234], ['2006-05', 222],
    ['2006-01', 192], ['2006-02', 185], ['2005-12', 116], ['2005-08', 85], ['2005-07', 69], ['2005-10', 68],
    ['2005-11', 68], ['2005-09', 53], ['2005-04', 52], ['2005-05', 49], ['2005-03', 48], ['2005-06', 46], ['2004-10', 33],
    ['2005-02', 21], ['2005-01', 16], ['2004-12', 12], ['2004-11', 6]];

var user_join_year = [['2011', 69210], ['2012', 63897], ['2013', 63483], ['2010', 50722], ['2014', 50505], ['2009', 32968],
    ['2008', 19390], ['2007', 10676], ['2006', 3974], ['2005', 691], ['2004', 51]];


function deal_with_user_join() {
    var ret = [];
    for (var i = 0; i < 11; ++i) {
        var tmp = [];
        for (var j = 0; j < 12; ++j)
        tmp.push(0);
        ret.push(tmp);
    }
    for (var i = 0; i < user_join.length; ++i) {
        var date = user_join[i][0];
        var num = user_join[i][1];
        var year = parseInt(date.split('-')[0]) - 2004;
        var month = parseInt(date.split('-')[1]) - 1;
        ret[year][month] = num;
    }
    return ret;
}

function deal_with_user_join_year() {
    var ret = [];
    for (var i = 0; i < user_join_year.length; ++i) ret.push([]);
    for (var i = 0; i < user_join_year.length; ++i) ret[parseInt(user_join_year[i][0])-2004] = user_join_year[i];
    return ret;
}



var user_relationship = [{"yelping_since": "2007-08", "votes": {"funny": 38, "useful": 76, "cool": 34}, "user_id": "317727", "name": "Connie", "fans": 3, "average_stars": 3.48, "friends": ["234760", "234200", "173998", "203099", "77709", "334396", "153098", "1000", "210650", "197041", "195576", "140453", "226744", "75145", "302069", "67925", "204776", "326717", "246988", "328895", "10655", "199832", "46637", "142254", "106150"]},
    {"yelping_since": "2012-08", "votes": {"funny": 1, "useful": 9, "cool": 1}, "user_id": "10655", "name": "Vivian", "fans": 0, "average_stars": 4.67, "friends": ["44857", "317727", "203099", "1000", "75145", "204776", "64408", "246988"]},
    {"yelping_since": "2008-08", "votes": {"funny": 30, "useful": 51, "cool": 35}, "user_id": "124088", "name": "Patty", "fans": 6, "average_stars": 4.0, "friends": ["317054", "208276", "352197", "129849", "136623", "250579", "118856", "254931", "166750", "287956", "300894", "185538", "1000", "88341", "224725", "39730", "44175", "198228", "64911", "43070", "319695", "360500", "210623", "323941", "17272", "113654", "65519", "330760", "156186", "25219", "358444", "209645", "313587", "129650", "54705", "64408", "39044", "26312", "90235", "331207", "77740", "278703", "19985", "328895", "236956", "75931", "295410", "89916", "139413", "330072", "244582", "73019", "284685", "20737", "9323"]},
    {"yelping_since": "2009-02", "votes": {"funny": 41, "useful": 129, "cool": 41}, "user_id": "60740", "name": "Angela", "fans": 7, "average_stars": 3.52, "friends": ["304260", "124635", "239773", "29151", "358943", "143459", "358293", "174481", "226979", "121514", "1000", "67645", "39730", "293099", "70660", "101126", "351735", "187477", "187718", "352479", "331247", "156317", "352458", "7814", "288622"]},
    {"yelping_since": "2010-08", "votes": {"funny": 18, "useful": 31, "cool": 18}, "user_id": "351735", "name": "Jennifer", "fans": 5, "average_stars": 3.31, "friends": ["7593", "138728", "323150", "145114", "166750", "60740", "1000", "35529", "224725", "181315", "57214", "364086", "198228", "260677", "352134", "70660", "210623", "17272", "152959", "187477", "152287", "202962", "257292", "139413", "232480", "9323"]},
    {"yelping_since": "2009-08", "votes": {"funny": 270, "useful": 438, "cool": 237}, "user_id": "39730", "name": "Angel", "fans": 16, "average_stars": 3.6, "friends": ["134679", "11118", "220532", "147812", "214035", "352197", "309273", "251439", "363029", "124635", "250579", "54800", "75234", "319084", "124088", "60142", "166750", "218770", "60740", "287956", "300894", "67330", "185538", "110791", "1000", "269833", "366075", "35529", "47920", "284080", "87104", "217726", "285979", "147354", "198228", "358021", "358168", "284075", "249694", "277250", "43070", "8077", "73116", "30696", "271714", "50667", "210623", "117981", "17272", "57467", "208859", "217901", "256701", "255574", "174054", "54798", "319339", "199795", "358444", "131520", "204547", "278991", "253465", "39044", "174626", "238869", "72347", "148815", "91522", "1508", "19985", "69895", "334703", "186188", "236956", "22203", "237610", "272718", "244582", "297413", "181696", "80586", "135467"]},
    {"yelping_since": "2006-05", "votes": {"funny": 25765, "useful": 24556, "cool": 23108}, "user_id": "82646", "name": "Stephy", "fans": 983, "average_stars": 3.88, "friends": ["1665", "181390", "16702", "311573", "268358", "241779", "262059", "79648", "247740", "16801", "205984", "249776", "106526", "196200", "272471", "35229", "4620", "94443", "279108", "58944", "172697", "99845", "188296", "158359", "67810", "293246", "124707", "18080", "80293", "166812", "303822", "338294", "162090", "239562", "262481", "279937", "117120", "77119", "161148", "364015", "271563", "188465", "113723", "62557", "225430", "45411", "294329", "212451", "343050", "227991", "48488", "302375", "215779", "296055", "262168", "258751", "92042", "263665", "70848", "139328", "214536", "255638", "112732", "233112", "29294", "222354", "208773", "213373", "1782", "343499", "4251", "282329", "364256", "20758", "135804", "111529", "282313", "119763", "100588", "2081", "63205", "112314", "332022", "248014", "46959", "138182", "45124", "56517", "109250", "33883", "86877", "146500", "261283", "296951", "296327", "193241", "85707", "286326", "164622", "238324", "270954", "302651", "362195", "299345", "187728", "112305", "167456", "178815", "29391", "262677", "8282", "239534", "55709", "558", "335377", "79273", "15775", "106539", "338855", "155569", "188745", "116393", "183976", "359175", "65123", "100373", "78133", "25940", "77555", "129412", "74760", "366381", "82133", "190283", "113528", "354887", "104092", "86628", "315351", "52590", "9894", "183971", "240627", "91724", "304062", "263229", "199764", "243965", "96992", "180210", "45207", "325130", "272502", "254068", "131114", "240647", "9830", "339420", "281998", "165255", "28405", "205650", "351753", "95827", "304811", "20333", "51946", "174374", "264962", "133186", "68092", "330083", "303557", "147254", "105321", "290554", "237701", "336516", "146621", "110831", "57645", "123815", "328086", "333791", "325358", "202162", "119698", "129232", "257215", "87255", "318127", "34097", "154915", "217888", "218399", "161764", "145566", "203194", "13222", "194797", "127137", "193992", "299487", "297594", "304203", "46098", "41873", "83980", "404", "160173", "155767", "320121", "247573", "161350", "333938", "261200", "62171", "86637", "286950", "126614", "11618", "45957", "217926", "302479", "52609", "15855", "11736", "307473", "37792", "314644", "246941", "62830", "289245", "111504", "100294", "172164", "92225", "256358", "178376", "49793", "200079", "299906", "341851", "85749", "264474", "72605", "99895", "230897", "102710", "328786", "238161", "331473", "8115", "39057", "30785", "158357", "26245", "13926", "60110", "56655", "270681", "352857", "328601", "233098", "265336", "359787", "163334", "49078", "22947", "225775", "318543", "10450", "132626", "185242", "314305", "234796", "269125", "2982", "111974", "73472", "138242", "282838", "44956", "320196", "188793", "227487", "79019", "361899", "151401", "347124", "177133", "16724", "43137", "68478", "310561", "284021", "221327", "139838", "168855", "324098", "150502", "233984", "272189", "307096", "56460", "24979", "308410", "274705", "93367", "296857", "166497", "237791", "211556", "156215", "138680", "285660", "217905", "51331", "99841", "346995", "145032", "17953", "120989", "76831", "28652", "247782", "130316", "206223", "101883", "129117", "243782", "33758", "126184", "231075", "152393", "348196", "268513", "134639", "148842", "105995", "49074", "131570", "241108", "17997", "185120", "213050", "355379", "98530", "91024", "358121", "247876", "13417", "197149", "278475", "169261", "56499", "274001", "143401", "128366", "137868", "219799", "351221", "222798", "9250", "169857", "64569", "293785", "298646", "139980", "306574", "9151", "248728", "132718", "165151", "63288", "69849", "255415", "170564", "230517", "4086", "283910", "273023", "284303", "108379", "150999", "337815", "233682", "340702", "81093", "261339", "218495", "34558", "91333", "94700", "181466", "35036", "98255", "67583", "246765", "198740", "77469", "24844", "278097", "177695", "82741", "220158", "16126", "290393", "365832", "132277", "108186", "255594", "124812", "276628", "37378", "181799", "54790", "310426", "262330", "175341", "124547", "253352", "258264", "223642", "16282", "362743", "67089", "335911", "341874", "229643", "332213", "315163", "300648", "172482", "303673", "183100", "171330", "17901", "305010", "271147", "333985", "139031", "268278", "176940", "219401", "317639", "247813", "299169", "86091", "329048", "199870", "279297", "244251", "188433", "102527", "119172", "333037", "125131", "68117", "236332", "354842", "233581", "233099", "220994", "158654", "109155", "341795", "116848", "74073", "118092", "103983", "87834", "148320", "239165", "115042", "150024", "32249", "323610", "301593", "70899", "71972", "36599", "36906", "206924", "23945", "239413", "24188", "194898", "316852", "31421", "149101", "107616", "268749", "112794", "249200", "275477", "284697", "174006", "138186", "292436", "109602", "343123", "136880", "276670", "278148", "303972", "167768", "19896", "152649", "333388", "232560", "21165", "56240", "191719", "112211", "305240", "27726", "21761", "323052", "196709", "268688", "125501", "267523", "304213", "299618", "28589", "207655", "302405", "70381", "146381", "343498", "321688", "50485", "148566", "228824", "286712", "190718", "240529", "122457", "130489", "184849", "135318", "164137", "128835", "4222", "241784", "268723", "122795", "214", "3574", "171580", "6055", "245328", "147322", "184185", "183480", "336805", "14372", "144861", "17920", "155138", "161869", "362112", "60073", "32403", "209813", "143708", "346612", "158481", "99409", "183541", "305968", "28767", "147699", "280503", "192927", "148813", "134810", "252122", "352282", "127229", "160700", "9264", "224213", "335198", "20916", "352498", "196691", "280883", "308215", "92452", "289527", "70533", "292020", "229846", "26335", "152639", "268486", "340350", "57722", "325267", "292602", "129512", "102149", "43365", "268246", "261260", "88120", "366241", "68522", "197620", "347203", "267943", "322323", "8723", "284935", "366324", "132131", "168506", "363228", "270156", "50384", "339668", "203063", "168950", "158783", "145401", "331991", "307675", "143131", "8523", "11118", "223580", "82701", "317273", "142531", "51", "119406", "62555", "85051", "244579", "112984", "306400", "362892", "115759", "7552", "191325", "272109", "5858", "292674", "291631", "37229", "294369", "71534", "151291", "235896", "115268", "65144", "248174", "264875", "256462", "291556", "90566", "248875", "204940", "358770", "234360", "17458", "119213", "190869", "190207", "174173", "300593", "129619", "205109", "153365", "61066", "266899", "24556", "35745", "38157", "199395", "11490", "196357", "238962", "164543", "259417", "176249", "340890", "270141", "314061", "293077", "363230", "327826", "14273", "313776", "137480", "15087", "177389", "174178", "327382", "189451", "215976", "87228", "258390", "162954", "355624", "16953", "232384", "271126", "233824", "278404", "239404", "49654", "74371", "206019", "263972", "338506", "49010", "183906", "187113", "121616", "224800", "22514", "254654", "307037", "46500", "78712", "279908", "47368", "11967", "301371", "27480", "45739", "98212", "287247", "36972", "5251", "144690", "139483", "1583", "101574", "359300", "301390", "86537", "257730", "307401", "309857", "117539", "180256", "332645", "109598", "177069", "50890", "60938", "289898", "359277", "46103", "60461", "163861", "259004", "109527", "353568", "325895", "310589", "89830", "81137", "184690", "295764", "198232", "298994", "28702", "325577", "141939", "111193", "233762", "69804", "95343", "50199", "80769", "319356", "321112", "282129", "125475", "203551", "75203", "88092", "25218", "222215", "180375", "350121", "336324", "243888", "331769", "230558", "79097", "363324", "33151", "281308", "252352", "102119", "86959", "106428", "123867", "260371", "191438", "348132", "236108", "2060", "289405", "342296", "223940", "177532", "220532", "235832", "232785", "102600", "269596", "10992", "12780", "27520", "287965", "269308", "62088", "108144", "178027", "5191", "258409", "25865", "248917", "140618", "149723", "218386", "92809", "126389", "2578", "199135", "155611", "307471", "40517", "55551", "30854", "347960", "191884", "100551", "103796", "30168", "225032", "9154", "43666", "291105", "70511", "32495", "225097", "174445", "179346", "84933", "32197", "84720", "154637", "258033", "167111", "291129", "250676", "99595", "153194", "203191", "233510", "67726", "93422", "110378", "226054", "265143", "363753", "199469", "360544", "218265", "316619", "220393", "224452", "288614", "135101", "137856", "24738", "78827", "324085", "62149", "89421", "147812", "304487", "301869", "73744", "168329", "142436", "307961", "306624", "21582", "223179", "335740", "121775", "216551", "31777", "222569", "290987", "126182", "226079", "366707", "319902", "104328", "117728", "312167", "335827", "243728", "71414", "159654", "3552", "339478", "262293", "360257", "67245", "57886", "342453", "125343", "69379", "149517", "50458", "115543", "268794", "331079", "330217", "113324", "4617", "275213", "15479", "206855", "177987", "250829", "6356", "164645", "141697", "234946", "220534", "204202", "312614", "132254", "121924", "76006", "226374", "143122", "182813", "136367", "361844", "125206", "21867", "216809", "146114", "271391", "73626", "131603", "76799", "177925", "41761", "238929", "206029", "294406", "57341", "83751", "153447", "23495", "52238", "72800", "251439", "220888", "291484", "57578", "73589", "158413", "139059", "35157", "230937", "180685", "309466", "190748", "113089", "310623", "287459", "199982", "51989", "284980", "84793", "30117", "338343", "314058", "214676", "218829", "7593", "354390", "15181", "42607", "193277", "263024", "334872", "115429", "94355", "253937", "110876", "28086", "186225", "337711", "323866", "201107", "344369", "294809", "27606", "42961", "98445", "36522", "347854", "341209", "236807", "181642", "98493", "266207", "219753", "76481", "106657", "191344", "245646", "289101", "226952", "256169", "265137", "121032", "111378", "290803", "153575", "97479", "92029", "146660", "104991", "98228", "140151", "13468", "97179", "66077", "343523", "47700", "339741", "32559", "235510", "272725", "263621", "264290", "80356", "120755", "176727", "342410", "21748", "36820", "15581", "82702", "90369", "363570", "91299", "347648", "335173", "12838", "125135", "360738", "363403", "40912", "259771", "329177", "310375", "69865", "296434", "354309", "196425", "213485", "57551", "265393", "257647", "195302", "287113", "338125", "47050", "43409", "186223", "287594", "193902", "60367", "49255", "51453", "366607", "280236", "358943", "235632", "14118", "283342", "6193", "4557", "18956", "116974", "122592", "343711", "272745", "198063", "5101", "122026", "186802", "304147", "246295", "18963", "173998", "187785", "167225", "263768", "281228", "309574", "293659", "304299", "102434", "185758", "231850", "343848", "112877", "215205", "212126", "357257", "337790", "350248", "140528", "200028", "196910", "187602", "18294", "325303", "225305", "183793", "314719", "24221", "1033", "149051", "275095", "169970", "188087", "366668", "125651", "149408", "256585", "115855", "5664", "287142", "320300", "304179", "172858", "131182", "44052", "358293", "319713", "92177", "53822", "313727", "287234", "117723", "286940", "152563", "255425", "219213", "51348", "86968", "319610", "216833", "151758", "81125", "218914", "94670", "353929", "20449", "278624", "162505", "61372", "145887", "357763", "29166", "292207", "120451", "122541", "75825", "230643", "248346", "356158", "41016", "229021", "297365", "178590", "237475", "43908", "125866", "151986", "22117", "282810", "366292", "118352", "308612", "97078", "248492", "343046", "240363", "54305", "320708", "350819", "362419", "89229", "298716", "146324", "66006", "340380", "220255", "51089", "240078", "59863", "118017", "251131", "43375", "195848", "211073", "175087", "45446", "5995", "186988", "104137", "38879", "178493", "1000", "298805", "86918", "294729", "269833", "269954", "35662", "169046", "204840", "356124", "226773", "200023", "79924", "344274", "90008", "298129", "108640", "87490", "295537", "283878", "124184", "177077", "150876", "44934", "82042", "99494", "156641", "314247", "130260", "19899", "361174", "305144", "115474", "25337", "68191", "233744", "91521", "47386", "152219", "331524", "268909", "284080", "163392", "158002", "164021", "165004", "220833", "629", "210797", "106004", "111709", "39740", "190758", "6718", "71784", "240249", "153320", "133874", "203195", "44175", "352814", "92531", "168933", "273648", "297792", "190713", "157964", "255909", "54310", "104350", "310123", "18624", "177472", "157757", "147232", "334759", "267087", "97699", "348973", "256416", "103830", "271200", "136814", "338926", "79376", "285979", "270565", "302923", "85580", "146902", "250585", "44548", "101248", "259536", "143133", "109737", "148512", "195980", "292731", "57932", "233339", "39957", "105040", "139843", "162895", "235207", "271978", "346516", "288205", "285281", "43070", "94994", "8077", "9333", "10661", "83488", "186011", "174275", "326473", "210468", "307494", "49859", "284095", "96872", "184746", "320126", "81076", "11013", "39299", "15321", "325361", "226624", "359151", "109112", "343140", "86490", "17272", "14830", "197282", "318397", "211747", "93595", "189285", "36180", "205404", "332796", "142222", "47635", "259034", "330245", "203108", "135607", "299496", "249053", "32078", "302", "335324", "36113", "209880", "342654", "108351", "217625", "90615", "260727", "145128", "337908", "65710", "152273", "275420", "36009", "60333", "354437", "177954", "315785", "363051", "263303", "285403", "339791", "59468", "195275", "360266", "218823", "189606", "62066", "61657", "132149", "361661", "1508", "226202", "365474", "291843", "212699", "315735", "131807", "100272", "174102", "120178", "96566", "142202", "305050", "88481", "70033", "273930", "248757", "161736", "131789", "272718", "131386", "116258", "240657", "67533", "231189", "129102", "92619", "53264", "303698", "282039", "322496", "325083", "7077", "178727", "240878", "125888", "57565", "99891"]},
    {"yelping_since": "2010-08", "votes": {"funny": 472, "useful": 595, "cool": 389}, "user_id": "17272", "name": "Carol", "fans": 21, "average_stars": 3.81, "friends": ["82646", "61650", "77705", "364208", "259173", "321112", "118108", "147812", "232816", "216466", "352197", "66816", "124088", "94101", "227572", "15333", "105580", "29029", "26870", "66170", "358293", "31546", "229021", "280213", "287956", "156681", "67330", "59863", "110791", "1000", "220066", "269833", "130260", "118184", "39730", "44175", "352814", "313506", "54310", "181315", "115915", "315769", "156162", "364086", "64911", "358168", "323404", "196931", "352134", "246529", "100296", "43070", "57350", "70660", "91900", "360500", "30696", "254223", "55926", "302282", "210623", "150254", "351735", "176888", "347679", "195478", "300328", "67643", "152959", "119395", "214867", "187477", "364398", "43698", "275619", "142222", "152287", "330245", "49294", "96373", "361131", "131654", "54705", "174505", "116898", "55865", "91522", "82632", "1508", "278703", "19985", "257292", "131807", "118327", "112181", "177669", "305050", "47325", "3804", "273930", "89916", "292983", "272718", "249190", "40193", "289059", "362791", "8991", "878", "45314", "18231", "293421", "196542", "9323", "135467"]},
    {"yelping_since": "2010-02", "votes": {"funny": 68, "useful": 62, "cool": 31}, "user_id": "64911", "name": "Gordon", "fans": 5, "average_stars": 3.05, "friends": ["65009", "52145", "215533", "250579", "22301", "124088", "365458", "49685", "1000", "269833", "246356", "262792", "235450", "305627", "249694", "237593", "360500", "30696", "302282", "210623", "268424", "244434", "17272", "147838", "67643", "128368", "119446", "317191", "290595", "73670", "278524", "209645", "100396", "131654", "54705", "39044", "16808", "354410", "182520", "290783", "37838", "75931", "122216", "257931", "42139", "193004"]},
    {"yelping_since": "2011-11", "votes": {"funny": 178, "useful": 142, "cool": 79}, "user_id": "19985", "name": "Paul", "fans": 7, "average_stars": 4.15, "friends": ["112314", "278148", "250579", "13468", "325329", "124088", "51453", "166750", "14841", "1000", "251790", "315771", "87104", "39730", "8552", "115915", "248706", "259536", "109737", "38322", "189704", "278360", "263547", "91900", "285941", "210623", "310961", "17272", "108079", "312447", "152959", "275619", "54798", "111542", "302244", "189178", "72931", "195518"]},
    {"yelping_since": "2012-06", "votes": {"funny": 26, "useful": 62, "cool": 24}, "user_id": "89916", "name": "Angeline", "fans": 3, "average_stars": 4.03, "friends": ["124088", "1000", "210623", "194004", "17272", "278703", "310594", "242488"]},
    {"yelping_since": "2010-07", "votes": {"funny": 14, "useful": 66, "cool": 15}, "user_id": "139313", "name": "Jenny", "fans": 0, "average_stars": 4.04, "friends": ["311324", "26870", "1000", "269833", "74154", "146607", "326731", "354020", "24280", "318972", "208128", "101105", "260008", "246988", "51000", "269239", "349702"]},
    {"yelping_since": "2010-01", "votes": {"funny": 47, "useful": 172, "cool": 45}, "user_id": "221949", "name": "King", "fans": 0, "average_stars": 3.37, "friends": ["43365", "15510", "253937", "255213", "1000", "210797", "54310", "221146", "77932", "358849", "44961", "276851", "333175", "107536", "117277", "246069"]},
    {"yelping_since": "2009-07", "votes": {"funny": 160, "useful": 377, "cool": 158}, "user_id": "163506", "name": "Lauren", "fans": 15, "average_stars": 3.75, "friends": ["35229", "112314", "68117", "24188", "160700", "158783", "170309", "136589", "35745", "270141", "287965", "337527", "164645", "191236", "129849", "107826", "30117", "304807", "124635", "118600", "138728", "243282", "191793", "251938", "51453", "182864", "188565", "251381", "21038", "213328", "38525", "15584", "140528", "185541", "363625", "81125", "142760", "229021", "305726", "195848", "1000", "269833", "362880", "108562", "130260", "27895", "352814", "2214", "29724", "146902", "198228", "81763", "359261", "43070", "25843", "50667", "234092", "214867", "254552", "152463", "319339", "224504", "145128", "337908", "328176", "212699", "154235", "332781", "273208", "261999", "99528", "366254"]},
    {"yelping_since": "2012-11", "votes": {"funny": 246, "useful": 341, "cool": 240}, "user_id": "139413", "name": "Annie", "fans": 27, "average_stars": 4.11, "friends": ["362276", "61650", "24188", "106790", "84377", "161869", "235940", "151359", "220532", "161695", "258033", "52145", "39428", "128900", "352197", "259791", "309182", "64054", "153523", "235061", "317550", "124088", "255213", "323150", "232353", "49530", "255894", "29029", "166750", "26870", "88397", "62337", "22583", "189872", "350277", "287956", "358981", "175087", "1000", "220066", "350538", "258787", "344989", "88341", "130260", "37233", "44175", "295627", "226134", "35937", "139750", "109446", "22619", "217777", "336249", "364086", "198228", "231569", "271879", "72545", "267829", "338722", "100296", "43070", "31173", "8077", "247614", "348271", "31632", "55637", "297737", "319695", "357271", "178308", "113654", "351735", "65519", "24915", "23620", "203772", "319010", "137289", "311175", "214867", "26697", "258925", "168320", "330245", "309045", "135607", "25219", "299496", "302", "358444", "172149", "93668", "14723", "266660", "212924", "287627", "253465", "315624", "5324", "70930", "6357", "91522", "8919", "1508", "81625", "71905", "226202", "257292", "37838", "302464", "200045", "172896", "302293", "52635", "339975", "187231", "105633", "221732", "328895", "272711", "246978", "44665", "273930", "263673", "263857", "2966", "27980", "131789", "249190", "181248", "190039", "240657", "107304", "285174", "179928", "336854", "328894", "246389", "223200", "185016", "38486"]},
    {"yelping_since": "2010-06", "votes": {"funny": 4, "useful": 11, "cool": 5}, "user_id": "360500", "name": "Hugo", "fans": 1, "average_stars": 3.4, "friends": ["65009", "52145", "250579", "124088", "35935", "1000", "246356", "262792", "235450", "305627", "64911", "132488", "210623", "17272", "147838", "317191", "73670", "209645", "100396", "131654", "39044", "16808", "354410", "138059", "320895", "257931", "244582", "193004"]},
    {"yelping_since": "2009-08", "votes": {"funny": 17683, "useful": 17106, "cool": 16147}, "user_id": "6718", "name": "Anthony", "fans": 224, "average_stars": 3.59, "friends": ["311573", "80293", "364256", "51122", "38219", "82646", "318543", "217905", "128366", "351832", "298646", "170281", "293092", "283910", "218495", "365832", "207923", "68117", "41514", "87834", "19896", "199194", "148566", "210817", "130489", "55331", "147322", "353845", "261533", "28767", "209288", "85627", "202979", "256814", "7552", "201196", "199560", "199395", "277157", "259417", "50222", "162954", "271126", "29925", "22514", "110686", "137930", "209512", "260548", "50890", "50199", "16845", "336324", "9941", "5134", "61173", "158772", "221845", "312995", "225097", "43821", "33333", "84933", "164914", "153061", "225066", "60552", "295800", "110378", "159917", "147812", "163279", "301869", "146552", "158645", "142436", "15994", "186085", "326409", "366707", "335827", "159654", "59866", "323951", "63963", "189011", "199029", "136367", "216809", "144334", "130550", "83751", "52238", "24320", "309273", "206308", "324517", "302542", "290201", "84793", "30117", "338343", "287216", "94223", "193277", "110876", "234200", "277532", "70428", "61102", "303532", "106657", "255929", "191344", "138728", "8379", "92029", "133742", "243870", "355637", "276621", "290126", "242078", "195620", "325329", "347648", "118232", "288219", "338162", "255213", "87479", "40912", "78148", "79807", "213485", "316316", "45761", "24958", "43409", "98743", "287594", "55648", "227572", "51453", "70048", "182864", "272745", "306352", "34639", "264843", "361600", "173998", "187785", "303549", "349774", "343848", "338750", "281067", "199750", "223185", "187602", "41832", "1033", "87588", "161132", "125651", "561", "188185", "47436", "204329", "247966", "143599", "313657", "341264", "218770", "110070", "358293", "233095", "311851", "287044", "317853", "110226", "153605", "7255", "198372", "329979", "81125", "19134", "31546", "165030", "316972", "28140", "161117", "29166", "277825", "19186", "302247", "305378", "229021", "5736", "205440", "205215", "235856", "316644", "4010", "62361", "216800", "189745", "211843", "196456", "181608", "189", "88228", "296322", "7536", "340380", "285247", "28880", "220255", "59863", "43375", "154582", "104137", "187810", "1000", "217143", "326415", "144795", "204078", "269833", "269954", "271757", "221678", "366075", "306210", "235949", "88927", "108640", "133019", "303625", "177077", "36928", "251790", "266000", "286343", "324716", "314247", "130260", "1024", "153401", "156754", "210523", "47613", "25337", "180263", "47386", "284080", "158002", "164021", "165004", "210797", "294908", "245576", "39740", "162616", "157945", "71784", "167727", "188361", "69425", "44175", "345292", "64583", "51022", "190713", "299620", "273830", "288651", "350595", "2752", "205273", "134464", "295849", "177472", "109446", "147232", "267087", "146607", "140944", "103830", "57214", "128303", "4286", "285979", "289688", "267833", "251975", "225622", "233940", "146902", "76396", "3790", "259536", "253429", "191805", "120344", "57932", "59397", "14366", "151887", "139843", "358063", "97150", "284075", "224485", "277261", "88258", "168022", "206437", "129998", "243437", "301845", "100296", "43070", "354574", "83488", "277593", "202707", "252516", "257567", "136276", "304954", "35736", "249530", "93987", "284095", "297737", "33817", "223679", "206515", "276163", "287082", "211799", "68494", "183783", "85441", "72423", "140168", "287602", "226624", "24312", "299379", "302282", "77023", "15370", "209446", "1563", "28175", "307353", "206721", "327599", "148775", "138660", "75408", "271529", "358320", "91701", "325322", "235560", "266671", "281957", "314325", "295937", "277819", "217441", "255574", "17397", "330245", "317072", "74640", "356249", "143028", "326117", "209880", "191860", "111542", "236382", "260727", "364410", "145128", "253300", "286573", "106620", "152273", "217294", "240834", "207432", "267658", "311990", "106088", "278703", "230853", "168196", "273208", "116722", "238916", "161060", "145379", "358962", "223951", "119725", "186590"]},
    {"yelping_since": "2008-07", "votes": {"funny": 190, "useful": 332, "cool": 202}, "user_id": "250579", "name": "Grace", "fans": 17, "average_stars": 3.49, "friends": ["66519", "61650", "204407", "11118", "77705", "364208", "24738", "310391", "352197", "4441", "69193", "166912", "318126", "251938", "124088", "15333", "38525", "304739", "145114", "166750", "88397", "131182", "363359", "85824", "81125", "302247", "67330", "1000", "35529", "39730", "113286", "181315", "333555", "53256", "366046", "279567", "339520", "257758", "262406", "249896", "297733", "64911", "230874", "233339", "101123", "139843", "236424", "41114", "113677", "297737", "222253", "360500", "30696", "302282", "210623", "178308", "74010", "323941", "187542", "241572", "83261", "212926", "98403", "230620", "269928", "143715", "245020", "218692", "339434", "219785", "54705", "278926", "39044", "160742", "191080", "314190", "358740", "181605", "81625", "228733", "19985", "76202", "181967", "187231", "75931", "22203", "116680", "209031", "196973", "263673", "161736", "315219", "263857", "363947", "300957", "249190", "17478", "107430", "239875", "89793", "244582", "20737", "131268", "242488", "87163", "148426"]},
    {"yelping_since": "2011-02", "votes": {"funny": 592, "useful": 902, "cool": 626}, "user_id": "25219", "name": "Amy", "fans": 15, "average_stars": 3.98, "friends": ["94599", "336516", "81555", "255415", "218495", "66519", "134679", "62154", "171330", "112211", "278797", "161869", "160700", "344738", "222592", "51061", "35745", "137480", "162954", "77705", "184155", "317946", "123114", "208276", "339754", "84933", "49498", "216466", "352197", "129849", "216809", "361155", "285750", "30117", "144878", "36522", "9103", "13468", "318126", "124088", "255213", "217389", "54045", "196425", "323150", "131153", "188565", "15584", "296576", "254931", "308163", "29029", "224024", "326136", "319046", "350277", "229021", "58701", "280213", "287956", "62361", "360634", "161315", "59863", "185538", "277002", "1000", "186631", "348893", "63423", "251790", "354294", "112684", "164021", "629", "279758", "37233", "247977", "201103", "341671", "305181", "201669", "140944", "41158", "325876", "44548", "198228", "109737", "358168", "57932", "225129", "323943", "222384", "101123", "105040", "224485", "141266", "355098", "172802", "43070", "8077", "278830", "362086", "277593", "96920", "165054", "52224", "276494", "30696", "348498", "8049", "50667", "210623", "358881", "141408", "65519", "282896", "55034", "247709", "214867", "217901", "74063", "202894", "309045", "213150", "54798", "365837", "218861", "286788", "245020", "358444", "234234", "253300", "113221", "271726", "337908", "253465", "278498", "363051", "157190", "174626", "295175", "278429", "278703", "350920", "365474", "288405", "212699", "339975", "361944", "279715", "301905", "107451", "216226", "292549", "65150", "252555", "80824", "221789", "22203", "248451", "273930", "91111", "173754", "161060", "139413", "310738", "244582", "36500", "306564", "322365", "878", "117500", "125888", "45314", "118493", "175130", "239948", "285487", "35226"]},
    {"yelping_since": "2008-08", "votes": {"funny": 21, "useful": 59, "cool": 33}, "user_id": "187012", "name": "Hazel", "fans": 2, "average_stars": 3.82, "friends": ["307675", "346383", "257943", "281054", "162655", "108135", "61289", "281228", "135336", "80189", "51385", "288652", "241242", "1000", "121194", "302282"]},
    {"yelping_since": "2011-05", "votes": {"funny": 2, "useful": 2, "cool": 0}, "user_id": "101105", "name": "Elizabeth", "fans": 0, "average_stars": 4.0, "friends": ["1000", "139313", "244582"]},
    {"yelping_since": "2008-07", "votes": {"funny": 35, "useful": 63, "cool": 33}, "user_id": "54800", "name": "Cathy", "fans": 1, "average_stars": 3.57, "friends": ["311554", "1000", "812", "39730", "80975", "210623", "151642", "175219", "111957", "132862", "141899", "34426", "176903", "106001", "306925", "304346", "160790", "290095", "80586"]},
    {"yelping_since": "2010-06", "votes": {"funny": 1935, "useful": 2313, "cool": 1812}, "user_id": "30696", "name": "Tammy", "fans": 40, "average_stars": 3.94, "friends": ["225199", "66519", "114322", "164588", "147322", "161869", "11118", "320395", "35745", "207832", "101574", "269596", "208276", "290701", "342047", "298781", "127129", "10495", "197350", "106087", "352197", "129849", "39192", "175687", "30117", "110876", "250579", "72023", "138728", "318126", "242821", "64972", "255213", "40912", "196425", "323150", "36245", "222396", "147560", "29029", "80189", "87588", "231913", "16793", "44780", "363359", "319046", "145300", "44398", "142760", "205215", "287956", "168813", "62361", "229626", "151762", "67330", "255865", "175087", "1000", "269833", "186631", "215197", "208623", "362592", "86870", "134716", "37233", "39730", "8552", "33347", "44175", "352814", "241843", "50307", "35937", "83206", "334759", "57214", "353388", "146902", "158471", "43286", "303152", "147354", "198228", "109737", "64911", "116899", "358168", "323404", "105040", "139843", "235207", "224485", "325415", "73359", "277250", "19505", "43070", "8077", "188278", "112717", "192241", "340732", "91900", "208055", "297737", "96953", "276494", "81076", "88838", "325361", "210623", "354577", "17272", "33466", "1875", "244750", "65519", "271327", "109911", "23690", "214867", "74063", "85097", "178232", "330245", "25219", "152636", "319339", "358444", "191860", "313587", "11451", "321735", "145128", "253300", "166241", "115891", "337908", "74614", "152273", "358043", "16808", "287257", "260393", "41662", "263303", "5047", "188320", "59468", "43295", "23316", "162330", "58243", "91522", "294476", "138761", "1508", "278703", "310594", "131209", "339975", "80824", "67144", "221789", "70033", "22203", "273208", "161460", "273930", "161736", "263857", "73107", "161078", "319368", "131789", "77223", "7814", "272718", "16556", "238916", "268969", "151889", "179399", "53264", "289985", "174499", "878", "325083", "242488", "45314", "359421", "164687", "99891", "4534", "130433"]},
    {"yelping_since": "2010-10", "votes": {"funny": 0, "useful": 5, "cool": 1}, "user_id": "44961", "name": "Allen", "fans": 0, "average_stars": 3.56, "friends": ["361155", "150926", "71802", "1000", "122486", "325876", "221949", "226744", "317135", "68242", "276851", "43927", "308474", "36133", "6357", "109553", "246069"]},
    {"yelping_since": "2010-07", "votes": {"funny": 5, "useful": 12, "cool": 9}, "user_id": "210623", "name": "Randy", "fans": 0, "average_stars": 4.19, "friends": ["250579", "187531", "360494", "54800", "124088", "16339", "244297", "166750", "53895", "307599", "1000", "39730", "298815", "226547", "339875", "64911", "358168", "303966", "91900", "360500", "343573", "30696", "244434", "17272", "109012", "351735", "99445", "152287", "22083", "25219", "209645", "131654", "79637", "56691", "197002", "233375", "46819", "278703", "19985", "250483", "236956", "89916", "256264", "184249", "153460", "244582", "261743", "273911", "142254", "9323"]},
    {"yelping_since": "2009-05", "votes": {"funny": 42, "useful": 81, "cool": 41}, "user_id": "1000", "name": "Aaron", "fans": 2, "average_stars": 3.93, "friends": ["82646", "317727", "250579", "54800", "187012", "124088", "60740", "163506", "39730", "6718", "221949", "64911", "360500", "30696", "139313", "210623", "17272", "351735", "44961", "25219", "101105", "19985", "89916", "10655", "139413"]}];


function deal_with_user_relationship(ddd) {
    if (ddd == null) ddd = user_relationship;
    var nodes = {};
    var edges = [];
    for (var i = 0; i < ddd.length; ++i) {
        var data = ddd[i];
        var info = {
            date: data['yelping_since'],
            votes: data['votes'],
            name:data['name'],
            fans:data['fans'],
            stars:data['average_stars']
        };
        nodes[data['user_id']] = info;
        for (var j = 0; j < data['friends'].length; ++j) {
            var id = data['friends'][j];
            if (nodes[id] != null) edges.push([data['user_id'], id]);
        }
    }
    var ret = {nodes: nodes, edges : edges};
    return ret;
}